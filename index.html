<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Odoo Price Comparison & Savings Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --ios-blue: #0A84FF;
            --ios-purple: #9B2DE4;
            --ios-teal: #63E6E8;
            --ios-orange: #FF9F0A;
            --ios-red: #FF3B30;
            --professional-highlight: #63E6E8;
            --main-gradient: linear-gradient(135deg, #A8BFFF 0%, #D4A8FF 100%);
            --apple-gradient: linear-gradient(135deg, #59c8fb, #5b6af8); 
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--main-gradient);
            min-height: 100vh;
            color: #1a1a1a;
        }

        /* Navigation styles */
        .nav-container {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .nav-btn {
            text-decoration: none;
            padding: 12px 20px;
            border-radius: 8px;
            background: linear-gradient(135deg, #4f46e5, #06b6d4);
            color: white;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }

        .nav-btn:hover {
            background: linear-gradient(135deg, #06b6d4, #4f46e5);
            transform: translateY(-2px);
            box-shadow: 0 6px 14px rgba(0,0,0,0.2);
        }

        .active {
            background: linear-gradient(135deg, #4338ca, #0e7490);
            box-shadow: 0 6px 14px rgba(0,0,0,0.25);
            pointer-events: none;
        }

        /* Glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .glass-dark {
            background: rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .animated-gradient {
            background: linear-gradient(-45deg, var(--ios-blue), var(--ios-purple), var(--ios-teal), var(--ios-orange));
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .floating {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        /* Plan Toggle */
        .plan-toggle-container {
            position: relative;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 999px;
            padding: 4px;
            display: flex;
            align-items: center;
        }
        .plan-toggle-bg {
            position: absolute;
            left: 4px;
            top: 4px;
            width: calc(50% - 4px);
            height: calc(100% - 8px);
            background: linear-gradient(135deg, var(--ios-blue), var(--ios-purple));
            border-radius: 999px;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .plan-toggle-bg.right {
            transform: translateX(calc(100% + 4px));
            background: linear-gradient(135deg, var(--ios-purple), var(--ios-teal));
        }

        .plan-toggle-btn {
            z-index: 1;
            padding: 10px 24px;
            border-radius: 999px;
            transition: color 0.3s ease;
        }
        .plan-toggle-btn.active {
            color: white;
        }
        .plan-toggle-btn.inactive {
            color: rgba(0, 0, 0, 0.6);
        }

        /* Modal and comparison view styling */
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            margin: 5% auto;
            padding: 2rem;
            border-radius: 1.5rem;
            width: 90%;
            max-width: 1200px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .modal-close {
            color: #aaa;
            float: right;
            font-size: 2.5rem;
            font-weight: bold;
            line-height: 1;
        }

        .modal-close:hover,
        .modal-close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        /* ----- CRITICAL PRINT STYLES FOR POPULATING REPORT ----- */
        @media print {
            /* Hide everything in the main app body */
            body > *:not(.report-iframe) {
                display: none !important;
            }

            /* Ensure the content of the print iframe/window is visible */
            .report-container, .report-container * {
                visibility: visible !important;
                /* Standard print settings for text and background */
                color: #000 !important;
                background-color: transparent !important;
                box-shadow: none !important;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            /* General page layout reset */
            body {
                visibility: visible !important;
                margin: 0;
                padding: 0;
                background: white !important;
            }
            
            /* Apply report container styling to print canvas */
            .report-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                min-height: 100vh;
                margin: 0;
                padding: 10mm;
            }

            /* Specific table and chart print adjustments */
            .comparison-table th {
                background-color: #f0f0f0 !important;
                color: #333 !important;
                border: 1px solid #ccc !important;
            }
            .yearly-col, .monthly-col {
                background-color: #fafafa !important;
            }
            .saving-highlight, .loss-highlight {
                background-color: #f0f8ff !important;
                border: 1px solid #ddd !important;
            }
            .chart-bars {
                border-bottom: 1px solid #000 !important;
            }
            .bar {
                box-shadow: none !important;
                background-color: #4CAF50 !important;
            }
            .bar.monthly {
                background-color: #f44336 !important;
            }
            .total-row td {
                border-top: 2px solid #000 !important;
            }
        }
    </style>
</head>
<body class="antialiased">

<!-- Navigation -->
<div class="nav-container">
    <a href="index.html" class="nav-btn active">Yearly vs Monthly Price</a>
    <a href="Multi_year_Contracts_Cost_Calculator.html" class="nav-btn">Multi-Year Contracts</a>
    <a href="Implementation_Service_Cost_Calculator.html" class="nav-btn">Implementation Service</a>
</div>

<div class="min-h-screen py-6 px-3 md:py-8 md:px-4">
    
    <!-- Floating Header -->
    <header class="text-center mb-8 floating">
        <div class="inline-block">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl font-black mb-3 text-white drop-shadow-lg">
                Odoo Yearly VS Monthly Cost Comparison Calculator
            </h1>
            <div class="h-1 w-24 mx-auto animated-gradient rounded-full mb-4"></div>
            <p class="text-lg sm:text-xl lg:text-2xl text-white/80 font-medium">
                Compare plans, maximize savings, optimize your investment
            </p>
        </div>
    </header>
    
    <!-- Button container -->
    <div class="flex flex-col md:flex-row justify-center items-center gap-3 text-center mb-6 flex-wrap">
        <!-- New Compare Plans Button -->
        <button id="compare-plans-btn" 
                class="px-5 py-2 md:px-6 md:py-3 rounded-xl font-bold text-white text-base md:text-lg transition-all duration-300 hover:scale-105"
                style="background: linear-gradient(135deg, var(--ios-teal), var(--ios-purple)); box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);">
            ‚öñÔ∏è Compare Standard and Custom Plans
        </button>

        <!-- Print Monthly/Yearly Button -->
        <button id="print-monthly-yearly-comparison-btn" 
                class="px-5 py-2 md:px-6 md:py-3 rounded-xl font-bold text-white text-base md:text-lg transition-all duration-300 hover:scale-105"
                style="background: var(--apple-gradient); box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);">
            üñ®Ô∏è Print Monthly/Yearly Comparison
        </button>

        <!-- Year Toggle -->
        <button id="year-toggle-btn" 
                class="px-5 py-2 md:px-6 md:py-3 rounded-xl font-bold text-white text-base md:text-lg transition-all duration-300 hover:scale-105"
                style="background: linear-gradient(135deg, var(--ios-blue), var(--ios-purple)); box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);">
            üîÑ Show Renewal Pricing
        </button>
    </div>

    <!-- Main Calculator -->
    <div class="glass-card rounded-2xl p-6 md:p-8 mb-6">
        
        <!-- Controls Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-10">
            
            <!-- User Input -->
            <div class="input-group relative">
                <label class="input-label absolute top-[-8px] left-[12px] bg-white px-2 text-xs font-medium text-blue-500 rounded-full shadow-md">Number of Users</label>
                <input type="number" id="num-users" value="10" min="1" 
                        class="w-full px-5 py-3 rounded-xl text-lg sm:text-xl lg:text-2xl font-semibold outline-none border border-gray-300 focus:border-blue-500 transition duration-300">
                <div id="input-error" class="text-red-500 text-xs mt-2 pl-2"></div>
            </div>

            <!-- Plan Toggle -->
            <div class="flex justify-center">
                <div class="plan-toggle-container">
                    <div id="plan-toggle-bg" class="plan-toggle-bg"></div>
                    <button id="standard-plan-btn" 
                            class="plan-toggle-btn font-bold text-base md:text-lg active">
                        ‚ú® Standard
                    </button>
                    <button id="custom-plan-btn" 
                            class="plan-toggle-btn font-bold text-base md:text-lg inactive">
                        üöÄ Custom
                    </button>
                </div>
            </div>
        </div>

        <!-- Pricing Cards -->
        <div class="grid grid-cols-1 xl:grid-cols-2 gap-6 mb-8">
            
            <!-- Yearly Plan -->
            <div class="glass-dark rounded-2xl p-5 md:p-6 border-2 border-green-200">
                <div class="flex items-center justify-between mb-5">
                    <div>
                        <h3 class="text-2xl sm:text-3xl font-black text-gray-800">üíé Yearly Plan</h3>
                        <p class="text-base sm:text-lg font-semibold text-green-600">Best Value ‚Ä¢ Save Big</p>
                    </div>
                    <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                        <span class="text-xl">üí∞</span>
                    </div>
                </div>
                
                <div class="space-y-3 text-base sm:text-lg">
                    <div class="flex justify-between items-center py-1 border-b border-gray-100">
                        <span class="font-semibold text-gray-700">Base Price (Excl. Taxes)</span>
                        <span id="yearly-base-price" class="font-bold"></span>
                    </div>
                    <div class="flex justify-between items-center py-1 border-b border-gray-100">
                        <span class="font-semibold text-green-600" id="yearly-discount-label">Discount</span>
                        <span id="yearly-discount" class="font-bold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center py-1 border-b-2 border-gray-200">
                        <span class="font-bold text-gray-800">Price Excl. Taxes</span>
                        <span id="yearly-price-excl-tax" class="font-bold"></span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="text-gray-600">Taxes (18%)</span>
                        <span id="yearly-tax" class="font-semibold"></span>
                    </div>
                    <div class="bg-gradient-to-r from-green-400 to-green-600 rounded-xl p-3">
                        <div class="flex justify-between items-center text-white">
                            <span class="font-bold">Total Annual Price (Incl. Taxes)</span>
                            <span id="yearly-total-price" class="font-black text-xl sm:text-2xl"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Monthly Plan -->
            <div class="glass-dark rounded-2xl p-5 md:p-6 border-2 border-orange-200">
                <div class="flex items-center justify-between mb-5">
                    <div>
                        <h3 class="text-2xl sm:text-3xl font-black text-gray-800">üìÖ Monthly Plan</h3>
                        <p class="text-base sm:text-lg font-semibold text-orange-600">Flexible ‚Ä¢ Pay as you go</p>
                    </div>
                    <div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
                        <span class="text-xl">üìä</span>
                    </div>
                </div>
                
                <div class="space-y-3 text-base sm:text-lg">
                    <div class="flex justify-between items-center py-1 border-b border-gray-100">
                        <span class="font-semibold text-gray-700">Base Price (Excl. Taxes)</span>
                        <span id="monthly-base-price" class="font-bold"></span>
                    </div>
                    <div class="flex justify-between items-center py-1 border-b border-gray-100">
                        <span class="font-semibold text-green-600" id="monthly-discount-label">Discount</span>
                        <span id="monthly-discount" class="font-bold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center py-1 border-b-2 border-gray-200">
                        <span class="font-bold text-gray-800">Price Excl. Taxes</span>
                        <span id="monthly-price-excl-tax" class="font-bold"></span>
                    </div>
                    <div class="flex justify-between items-center py-1 border-b border-gray-100">
                        <span class="text-gray-600">Taxes (18%)</span>
                        <span id="monthly-tax" class="font-semibold"></span>
                    </div>
                    <div class="bg-gradient-to-r from-orange-400 to-orange-600 rounded-xl p-3 mb-3">
                        <div class="flex justify-between items-center text-white">
                            <span class="font-bold">Monthly Total (Incl. Taxes)</span>
                            <span id="monthly-total-price" class="font-black text-xl sm:text-2xl"></span>
                        </div>
                    </div>
                    <div class="loss-highlight rounded-xl p-3">
                        <div class="flex justify-between items-center">
                            <span class="font-bold loss-text">Annualized Cost (12 months)</span>
                            <span id="monthly-annualized-price" class="font-black text-xl sm:text-2xl loss-text"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Savings Highlight -->
        <div class="bg-gray-800 rounded-2xl p-5 md:p-6 mb-6 text-white relative overflow-hidden">
            <div class="relative z-10">
                <div class="text-center mb-5">
                    <h3 class="text-2xl sm:text-3xl font-black mb-2" style="color: white;">
                        üí∏ Extra Cost with Monthly Plan
                    </h3>
                    <p class="text-base sm:text-xl font-medium" style="color: rgba(255,255,255,0.8);">See how much extra you pay by choosing monthly over yearly</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="text-center">
                        <div class="bg-white/10 rounded-xl p-5 border border-white/20">
                            <span id="total-loss-amount" class="block text-3xl sm:text-4xl lg:text-5xl font-black mb-2" style="color: var(--professional-highlight);"></span>
                            <p class="text-base sm:text-xl font-semibold" style="color: rgba(255,255,255,0.8);">Additional Annual Cost</p>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="bg-white/10 rounded-xl p-5 border border-white/20">
                            <span id="loss-percentage" class="block text-3xl sm:text-4xl lg:text-5xl font-black mb-2" style="color: var(--professional-highlight);"></span>
                            <p class="text-base sm:text-xl font-semibold" style="color: rgba(255,255,255,0.8);">% More Expensive</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="glass-card rounded-2xl p-5 md:p-6">
            <h3 class="text-2xl sm:text-3xl font-black text-gray-800 mb-5 text-center">
                üìà Annual Cost Comparison
            </h3>
            <div class="h-64">
                <canvas id="cost-chart"></canvas>
            </div>
        </div>
        
    </div>

    
    <!-- Contact Footer -->
    <footer class="bg-gray-100 rounded-2xl p-5 md:p-6 text-center shadow-lg border border-gray-300">
        <div class="mb-5">
            <h3 class="text-2xl sm:text-3xl font-bold mb-2 text-gray-800">üéØ Do You Have Cool Idea For this Project?</h3>
            <p class="text-base sm:text-xl text-gray-700">Connect With Me on Discord</p>
        </div>
        
        <div class="bg-white rounded-xl p-5 max-w-sm mx-auto border border-gray-200">
            <div class="font-bold text-xl sm:text-2xl mb-3 text-gray-900">Ataur Shah</div>
            <div class="space-y-2 text-base sm:text-lg">
                <a href="mailto:atsh@odoo.com" 
                   class="flex items-center justify-center gap-2 bg-blue-50 rounded-lg p-2 hover:bg-blue-100 transition-all text-gray-900">
                    <span class="text-lg">üìß</span>
                    <span class="font-semibold">atsh@odoo.com</span>
                </a>
            </div>
        </div>
    </footer>
</div>

<!-- Comparison Modal (RESTORED CONTENT) -->
<div id="compare-modal" class="modal">
    <div class="modal-content p-4 md:p-6">
        <span class="modal-close">&times;</span>
        <h2 class="text-3xl sm:text-4xl font-black text-gray-800 text-center mb-6">
            Odoo Plan Comparison Table
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
            <!-- Standard Plan Details -->
            <div class="bg-white rounded-xl p-4 md:p-5 shadow-lg border-2 border-purple-200">
                <h3 class="text-xl sm:text-2xl font-bold text-purple-600 mb-3">‚ú® Standard Plan</h3>
                <h4 class="text-lg sm:text-xl font-semibold text-gray-700 mb-2">Benefits:</h4>
                <ul class="list-disc list-inside space-y-2 text-base sm:text-lg text-gray-600 mb-4">
                    <li>Access to all apps</li>
                    <li>Hosting: Odoo Online only</li>
                </ul>
                
                <!-- First-Year Breakdown -->
                <div class="bg-purple-50 rounded-lg p-2 md:p-3 mb-3 text-sm sm:text-base">
                    <h5 class="font-bold text-lg sm:text-xl mb-2 text-purple-700">First-Year Pricing Breakdown</h5>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Base Price for <span id="standard-first-year-user-count"></span> Users:</span>
                        <span id="compare-standard-first-year-base-price" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>First Year Initial Discount:</span>
                        <span id="compare-standard-first-year-discount" class="font-semibold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Price after discount without tax:</span>
                        <span id="compare-standard-first-year-price-excl-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Taxes (18%):</span>
                        <span id="compare-standard-first-year-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center font-bold">
                        <span>Total Price Incl. Taxes:</span>
                        <span id="compare-standard-first-year-total-price" class="font-black"></span>
                    </div>
                </div>
                
                <!-- Renewal Breakdown -->
                <div class="bg-purple-100 rounded-lg p-2 md:p-3 mb-3 text-sm sm:text-base">
                    <h5 class="font-bold text-lg sm:text-xl mb-2 text-purple-700">Renewal Pricing Breakdown</h5>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Base Price for <span id="standard-renewal-user-count"></span> Users:</span>
                        <span id="compare-standard-renewal-base-price" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Discount:</span>
                        <span id="compare-standard-renewal-discount" class="font-semibold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Taxes (18%):</span>
                        <span id="compare-standard-renewal-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center font-bold">
                        <span>Total Price Incl. Taxes:</span>
                        <span id="compare-standard-renewal-total-price" class="font-black"></span>
                    </div>
                </div>
                
                <div class="bg-purple-200 rounded-lg p-2 md:p-3 text-base sm:text-lg">
                    <h5 class="font-bold text-purple-700 mb-2">Effective Costs (Excl. Taxes):</h5>
                    <div class="flex justify-between items-center mb-2 text-sm sm:text-base">
                        <span>Base Price (Excl. GST) per User:</span>
                        <span id="compare-standard-per-user-base-price" class="font-black"></span>
                    </div>
                    <div class="flex justify-between items-center mb-2 text-sm sm:text-base">
                        <span>First Year / User / Month:</span>
                        <span id="compare-standard-per-user-first-year" class="font-black"></span>
                    </div>
                    <div class="flex justify-between items-center text-sm sm:text-base">
                        <span>Renewal / User / Month:</span>
                        <span id="compare-standard-per-user-renewal" class="font-black"></span>
                    </div>
                </div>
            </div>

            <!-- Custom Plan Details -->
            <div class="bg-white rounded-xl p-4 md:p-5 shadow-lg border-2 border-purple-200">
                <h3 class="text-xl sm:text-2xl font-bold text-purple-600 mb-3">üöÄ Custom Plan</h3>
                <h4 class="text-lg sm:text-xl font-semibold text-gray-700 mb-2">Benefits:</h4>
                <ul class="list-disc list-inside space-y-2 text-base sm:text-lg text-gray-600 mb-4">
                    <li>All apps</li>
                    <li>Odoo Online / Odoo.sh / On-premise</li>
                    <li>Odoo Studio</li>
                    <li>Multi-Company</li>
                    <li>External API</li>
                </ul>

                <!-- First-Year Breakdown -->
                <div class="bg-purple-50 rounded-lg p-2 md:p-3 mb-3 text-sm sm:text-base">
                    <h5 class="font-bold text-lg sm:text-xl mb-2 text-purple-700">First-Year Pricing Breakdown</h5>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Base Price for <span id="custom-first-year-user-count"></span> Users:</span>
                        <span id="compare-custom-first-year-base-price" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>First Year Initial Discount:</span>
                        <span id="compare-custom-first-year-discount" class="font-semibold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Price after discount without tax:</span>
                        <span id="compare-custom-first-year-price-excl-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Taxes (18%):</span>
                        <span id="compare-custom-first-year-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center font-bold">
                        <span>Total Price Incl. Taxes:</span>
                        <span id="compare-custom-first-year-total-price" class="font-black"></span>
                    </div>
                </div>
                
                <!-- Renewal Breakdown -->
                <div class="bg-purple-100 rounded-lg p-2 md:p-3 mb-3 text-sm sm:text-base">
                    <h5 class="font-bold text-lg sm:text-xl mb-2 text-purple-700">Renewal Pricing Breakdown</h5>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Base Price for <span id="custom-renewal-user-count"></span> Users:</span>
                        <span id="compare-custom-renewal-base-price" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Discount:</span>
                        <span id="compare-custom-renewal-discount" class="font-semibold text-green-600"></span>
                    </div>
                    <div class="flex justify-between items-center mb-1 text-xs sm:text-sm">
                        <span>Taxes (18%):</span>
                        <span id="compare-custom-renewal-tax" class="font-semibold"></span>
                    </div>
                    <div class="flex justify-between items-center font-bold">
                        <span>Total Price Incl. Taxes:</span>
                        <span id="compare-custom-renewal-total-price" class="font-black"></span>
                    </div>
                </div>

                <div class="bg-purple-200 rounded-lg p-2 md:p-3 text-base sm:text-lg">
                    <h5 class="font-bold text-purple-700 mb-2">Effective Costs (Excl. Taxes):</h5>
                    <div class="flex justify-between items-center mb-2 text-sm sm:text-base">
                        <span>Base Price (Excl. GST) per User:</span>
                        <span id="compare-custom-per-user-base-price" class="font-black"></span>
                    </div>
                    <div class="flex justify-between items-center mb-2 text-sm sm:text-base">
                        <span>First Year / User / Month:</span>
                        <span id="compare-custom-per-user-first-year" class="font-black"></span>
                    </div>
                    <div class="flex justify-between items-center text-sm sm:text-base">
                        <span>Renewal / User / Month:</span>
                        <span id="compare-custom-per-user-renewal" class="font-black"></span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="flex flex-col items-center mt-6">
            <button id="print-analysis-btn-modal" 
                    class="px-6 py-3 rounded-full font-bold text-white transition-all duration-300 hover:scale-105" 
                    style="background: linear-gradient(135deg, #06b6d4, #10b981);">
                üñ®Ô∏è Print Cost Analysis
            </button>
        </div>
        
    </div>
</div>

<!-- Print Options Modal (Re-used for both reports) -->
<div id="print-modal" class="modal">
    <div class="modal-content p-6 text-center">
        <span class="modal-close">&times;</span>
        <h2 class="text-2xl sm:text-3xl font-black text-gray-800 mb-6" id="print-modal-title">
            Choose a Plan to Print
        </h2>
        <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
            <button id="print-standard-btn" data-report-type="analysis" class="px-6 py-3 rounded-full font-bold text-white transition-all duration-300 hover:scale-105" style="background: linear-gradient(135deg, var(--ios-blue), var(--ios-purple));">
                ‚ú® Odoo Standard Plan
            </button>
            <button id="print-custom-btn" data-report-type="analysis" class="px-6 py-3 rounded-full font-bold text-white transition-all duration-300 hover:scale-105" style="background: linear-gradient(135deg, var(--ios-purple), var(--ios-teal));">
                üöÄ Odoo Custom Plan
            </button>
        </div>
    </div>
</div>

<script>
    // Pricing data structure
    const pricingData = {
        standard: {
            yearly: { base: 8700, discount: -1740 },
            monthly: { base: 950, discount: -190 }
        },
        custom: {
            yearly: { base: 13800, discount: -3120 },
            monthly: { base: 1420, discount: -280 }
        }
    };
    
    // Plan benefits data structure
    const planBenefits = {
        standard: {
            title: "Standard Plan",
            icon: "‚ú®",
            benefits: [
                {
                    text: "Access to all apps( Except Odoo Studio and Automation)",
                    note: "Gain full access to all essential Odoo apps to manage your business operations."
                },
                {
                    text: "Hosting: Odoo Online only",
                    note: "Enjoy hassle-free hosting on Odoo's cloud platform, with no setup required."
                }
            ]
        },
        custom: {
            title: "Custom Plan",
            icon: "üöÄ",
            benefits: [
                {
                    text: "All apps",
                    note: "A comprehensive solution with all Odoo apps available from the start."
                },
                {
                    text: "Odoo Online / Odoo.sh / On-premise",
                    note: "Choose your preferred hosting environment: cloud, dedicated cloud, or on-site."
                },
                {
                    text: "Odoo Studio",
                    note: "Customize your Odoo apps with a user-friendly drag-and-drop interface."
                },
                {
                    text: "Multi-Company",
                    note: "Manage multiple companies with a single Odoo database."
                },
                {
                    text: "External API",
                    note: "Integrate Odoo with other business applications and services."
                }
            ]
        }
    };

    // DOM elements
    const numUsersInput = document.getElementById('num-users');
    const inputError = document.getElementById('input-error');
    const standardPlanBtn = document.getElementById('standard-plan-btn');
    const customPlanBtn = document.getElementById('custom-plan-btn');
    const planToggleBg = document.getElementById('plan-toggle-bg');
    const yearToggleBtn = document.getElementById('year-toggle-btn');
    const comparePlansBtn = document.getElementById('compare-plans-btn');
    const compareModal = document.getElementById('compare-modal');
    const printAnalysisBtnModal = document.getElementById('print-analysis-btn-modal');
    const printMonthlyYearlyComparisonBtn = document.getElementById('print-monthly-yearly-comparison-btn');
    const printModal = document.getElementById('print-modal');
    const printModalTitle = document.getElementById('print-modal-title');
    const printStandardBtn = document.getElementById('print-standard-btn');
    const printCustomBtn = document.getElementById('print-custom-btn');
    const allModals = document.querySelectorAll('.modal');
    
    // Display elements
    const elements = {
        yearlyDiscountLabel: document.getElementById('yearly-discount-label'),
        yearlyBasePrice: document.getElementById('yearly-base-price'),
        yearlyDiscount: document.getElementById('yearly-discount'),
        yearlyPriceExclTax: document.getElementById('yearly-price-excl-tax'),
        yearlyTax: document.getElementById('yearly-tax'),
        yearlyTotalPrice: document.getElementById('yearly-total-price'),
        monthlyDiscountLabel: document.getElementById('monthly-discount-label'),
        monthlyBasePrice: document.getElementById('monthly-base-price'),
        monthlyDiscount: document.getElementById('monthly-discount'),
        monthlyPriceExclTax: document.getElementById('monthly-price-excl-tax'),
        monthlyTax: document.getElementById('monthly-tax'),
        monthlyTotalPrice: document.getElementById('monthly-total-price'),
        monthlyAnnualizedPrice: document.getElementById('monthly-annualized-price'),
        totalLossAmount: document.getElementById('total-loss-amount'),
        lossPercentage: document.getElementById('loss-percentage')
    };

    // State
    let isStandardPlan = true;
    let isFirstYear = true;
    let currentReportType = 'analysis';

    // Chart setup
    const ctx = document.getElementById('cost-chart').getContext('2d');
    let costChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['üíé Yearly Plan', 'üìÖ Monthly Plan (12 months)'],
            datasets: [{
                label: 'Annual Cost (Rs.)',
                data: [0, 0],
                backgroundColor: ['rgba(16, 185, 129, 0.8)', 'rgba(239, 68, 68, 0.8)'],
                borderColor: ['rgba(16, 185, 129, 1)', 'rgba(239, 68, 68, 1)'],
                borderWidth: 3,
                borderRadius: 12,
                borderSkipped: false,
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    cornerRadius: 12,
                    displayColors: false,
                    callbacks: {
                        label: (context) => {
                            const value = context.parsed.y;
                            const isMonthly = context.dataIndex === 1;
                            return `Annual Cost: ‚Çπ${value.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} (${isMonthly ? 'MORE EXPENSIVE!' : 'BEST VALUE!'})`;
                        }
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    title: { display: true, text: 'Annual Cost (‚Çπ)', font: { size: 14, weight: 'bold' } },
                    grid: { color: 'rgba(0, 0, 0, 0.1)', borderDash: [5, 5] }
                },
                x: {
                    grid: { display: false },
                    ticks: { font: { size: 14, weight: 'bold' } }
                }
            },
            animation: { duration: 1000, easing: 'easeInOutQuart' }
        }
    });

    // Currency formatter
    const formatCurrency = (value) => {
        return `‚Çπ${value.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
    };

    // Add smooth number animation
    function animateNumber(element, targetValue, format = formatCurrency) {
        const startValue = 0;
        const duration = 800;
        const increment = (targetValue - startValue) / (duration / 16);
        let currentValue = startValue;
        
        const timer = setInterval(() => {
            currentValue += increment;
            if (currentValue >= targetValue) {
                currentValue = targetValue;
                clearInterval(timer);
            }
            element.textContent = format(currentValue);
        }, 16);
    }
    
    // Main calculation function (Used for on-screen calculator and chart)
    function updateCalculator() {
        const numUsers = parseInt(numUsersInput.value, 10);
        if (isNaN(numUsers) || numUsers < 1) {
            document.getElementById('input-error').textContent = 'Please enter a number greater than 0.';
            return;
        } else {
            document.getElementById('input-error').textContent = '';
        }

        const planKey = isStandardPlan ? 'standard' : 'custom';
        const planRates = pricingData[planKey];
        
        let yearlyBase, yearlyDiscount, monthlyBase, monthlyDiscount;

        if (isFirstYear) {
            yearlyBase = planRates.yearly.base;
            yearlyDiscount = planRates.yearly.discount;
            monthlyBase = planRates.monthly.base;
            monthlyDiscount = planRates.monthly.discount;
            
            elements.yearlyDiscountLabel.textContent = 'First-Year Discount (on initial order only)';
            elements.monthlyDiscountLabel.textContent = 'First-Year Discount (on initial order only)';
        } else {
            yearlyBase = planRates.yearly.base;
            yearlyDiscount = 0;
            monthlyBase = planRates.monthly.base;
            monthlyDiscount = 0;
            
            elements.yearlyDiscountLabel.textContent = 'Discount';
            elements.monthlyDiscountLabel.textContent = 'Discount';
        }

        // Calculations
        const yearlyPriceExclTax = (yearlyBase + yearlyDiscount) * numUsers;
        const yearlyTax = yearlyPriceExclTax * 0.18;
        const yearlyTotalPrice = yearlyPriceExclTax * 1.18;

        const monthlyPriceExclTax = (monthlyBase + monthlyDiscount) * numUsers;
        const monthlyTax = monthlyPriceExclTax * 0.18;
        const monthlyTotalPrice = monthlyPriceExclTax * 1.18;

        const monthlyAnnualizedCost = monthlyTotalPrice * 12;
        
        // Loss calculation (Monthly is more expensive than Yearly)
        const totalLoss = monthlyAnnualizedCost - yearlyTotalPrice;
        
        // % More Expensive Than Yearly
        const lossPercentage = (totalLoss / yearlyTotalPrice) * 100;

        // Update UI with animations
        animateNumber(elements.yearlyBasePrice, yearlyBase * numUsers);
        if (isFirstYear && yearlyDiscount !== 0) {
            const yearlyDiscountAmount = yearlyDiscount * numUsers;
            const yearlyDiscountPercent = (Math.abs(yearlyDiscount) / yearlyBase) * 100;
            elements.yearlyDiscount.textContent = `${formatCurrency(yearlyDiscountAmount)} (${yearlyDiscountPercent.toFixed(1)}%)`;
        } else {
            elements.yearlyDiscount.textContent = formatCurrency(yearlyDiscount * numUsers);
        }
        
        animateNumber(elements.yearlyPriceExclTax, yearlyPriceExclTax);
        animateNumber(elements.yearlyTax, yearlyTax);
        animateNumber(elements.yearlyTotalPrice, yearlyTotalPrice);

        animateNumber(elements.monthlyBasePrice, monthlyBase * numUsers);
        if (isFirstYear && monthlyDiscount !== 0) {
            const monthlyDiscountAmount = monthlyDiscount * numUsers;
            const monthlyDiscountPercent = (Math.abs(monthlyDiscount) / monthlyBase) * 100;
            elements.monthlyDiscount.textContent = `${formatCurrency(monthlyDiscountAmount)} (${monthlyDiscountPercent.toFixed(1)}%)`;
        } else {
            elements.monthlyDiscount.textContent = formatCurrency(monthlyDiscount * numUsers);
        }
        
        animateNumber(elements.monthlyPriceExclTax, monthlyPriceExclTax);
        animateNumber(elements.monthlyTax, monthlyTax);
        animateNumber(elements.monthlyTotalPrice, monthlyTotalPrice);
        animateNumber(elements.monthlyAnnualizedPrice, monthlyAnnualizedCost);

        // UI for Loss/Savings
        animateNumber(elements.totalLossAmount, totalLoss);
        animateNumber(elements.lossPercentage, lossPercentage, (val) => `${val.toFixed(1)}%`);

        // Update chart with animation
        setTimeout(() => {
            costChart.data.datasets[0].data = [yearlyTotalPrice, monthlyAnnualizedCost];
            costChart.update('active');
        }, 200);
    }
    
    // Function to update the comparison modal (RESTORED LOGIC)
    function updateComparisonModal() {
        const numUsers = parseInt(numUsersInput.value, 10);
        if (isNaN(numUsers) || numUsers < 1) {
            return;
        }
        
        // --- Standard Plan Calculations ---
        const standardFirstYearBase = pricingData.standard.yearly.base * numUsers;
        const standardFirstYearDiscount = pricingData.standard.yearly.discount * numUsers;
        const standardFirstYearPriceExclTax = standardFirstYearBase + standardFirstYearDiscount;
        const standardFirstYearTax = standardFirstYearPriceExclTax * 0.18;
        const standardFirstYearTotalPrice = standardFirstYearPriceExclTax + standardFirstYearTax;
        const standardFirstYearPerUserPerMonth = (standardFirstYearPriceExclTax / 12) / numUsers;

        const standardRenewalBase = pricingData.standard.yearly.base * numUsers;
        const standardRenewalPriceExclTax = standardRenewalBase;
        const standardRenewalTax = standardRenewalPriceExclTax * 0.18;
        const standardRenewalTotalPrice = standardRenewalPriceExclTax + standardRenewalTax;
        const standardRenewalPerUserPerMonth = (standardRenewalPriceExclTax / 12) / numUsers;

        // --- Custom Plan Calculations ---
        const customFirstYearBase = pricingData.custom.yearly.base * numUsers;
        const customFirstYearDiscount = pricingData.custom.yearly.discount * numUsers;
        const customFirstYearPriceExclTax = customFirstYearBase + customFirstYearDiscount;
        const customFirstYearTax = customFirstYearPriceExclTax * 0.18;
        const customFirstYearTotalPrice = customFirstYearPriceExclTax + customFirstYearTax;
        const customFirstYearPerUserPerMonth = (customFirstYearPriceExclTax / 12) / numUsers;
        
        const customRenewalBase = pricingData.custom.yearly.base * numUsers;
        const customRenewalPriceExclTax = customRenewalBase;
        const customRenewalTax = customRenewalPriceExclTax * 0.18;
        const customRenewalTotalPrice = customRenewalPriceExclTax + customRenewalTax;
        const customRenewalPerUserPerMonth = (customRenewalPriceExclTax / 12) / numUsers;
        
        // Update Modal UI
        document.getElementById('standard-first-year-user-count').textContent = numUsers;
        document.getElementById('standard-renewal-user-count').textContent = numUsers;
        document.getElementById('custom-first-year-user-count').textContent = numUsers;
        document.getElementById('custom-renewal-user-count').textContent = numUsers;

        // Standard First Year Breakdown
        const standardFirstYearDiscountPercent = (Math.abs(pricingData.standard.yearly.discount) / pricingData.standard.yearly.base) * 100;
        document.getElementById('compare-standard-first-year-base-price').textContent = formatCurrency(standardFirstYearBase);
        document.getElementById('compare-standard-first-year-discount').textContent = `${formatCurrency(standardFirstYearDiscount)} (${standardFirstYearDiscountPercent.toFixed(1)}%)`;
        document.getElementById('compare-standard-first-year-price-excl-tax').textContent = formatCurrency(standardFirstYearPriceExclTax);
        document.getElementById('compare-standard-first-year-tax').textContent = formatCurrency(standardFirstYearTax);
        document.getElementById('compare-standard-first-year-total-price').textContent = formatCurrency(standardFirstYearTotalPrice);

        // Standard Renewal Breakdown
        document.getElementById('compare-standard-renewal-base-price').textContent = formatCurrency(standardRenewalBase);
        document.getElementById('compare-standard-renewal-discount').textContent = formatCurrency(0) + ' (0.0%)';
        document.getElementById('compare-standard-renewal-tax').textContent = formatCurrency(standardRenewalTax);
        document.getElementById('compare-standard-renewal-total-price').textContent = formatCurrency(standardRenewalTotalPrice);
        
        // Standard Effective Costs
        document.getElementById('compare-standard-per-user-base-price').textContent = formatCurrency(pricingData.standard.yearly.base);
        document.getElementById('compare-standard-per-user-first-year').textContent = formatCurrency(standardFirstYearPerUserPerMonth);
        document.getElementById('compare-standard-per-user-renewal').textContent = formatCurrency(standardRenewalPerUserPerMonth);

        // Custom First Year Breakdown
        const customFirstYearDiscountPercent = (Math.abs(pricingData.custom.yearly.discount) / pricingData.custom.yearly.base) * 100;
        document.getElementById('compare-custom-first-year-base-price').textContent = formatCurrency(customFirstYearBase);
        document.getElementById('compare-custom-first-year-discount').textContent = `${formatCurrency(customFirstYearDiscount)} (${customFirstYearDiscountPercent.toFixed(1)}%)`;
        document.getElementById('compare-custom-first-year-price-excl-tax').textContent = formatCurrency(customFirstYearPriceExclTax);
        document.getElementById('compare-custom-first-year-tax').textContent = formatCurrency(customFirstYearTax);
        document.getElementById('compare-custom-first-year-total-price').textContent = formatCurrency(customFirstYearTotalPrice);

        // Custom Renewal Breakdown
        document.getElementById('compare-custom-renewal-base-price').textContent = formatCurrency(customRenewalBase);
        document.getElementById('compare-custom-renewal-discount').textContent = formatCurrency(0) + ' (0.0%)';
        document.getElementById('compare-custom-renewal-tax').textContent = formatCurrency(customRenewalTax);
        document.getElementById('compare-custom-renewal-total-price').textContent = formatCurrency(customRenewalTotalPrice);
        
        // Custom Effective Costs
        document.getElementById('compare-custom-per-user-base-price').textContent = formatCurrency(pricingData.custom.yearly.base);
        document.getElementById('compare-custom-per-user-first-year').textContent = formatCurrency(customFirstYearPerUserPerMonth);
        document.getElementById('compare-custom-per-user-renewal').textContent = formatCurrency(customRenewalPerUserPerMonth);
    }
    
    // Function to generate and print the standard Cost Analysis report (Yearly vs Renewal)
    function generateAndPrintReport(planType) {
        const numUsers = parseInt(numUsersInput.value, 10);
        if (isNaN(numUsers) || numUsers < 1) {
            alert('Please enter a valid number of users to generate the report.');
            return;
        }

        const planData = pricingData[planType].yearly;
        const benefitsData = planBenefits[planType];
        
        // Calculations
        const basePrice = planData.base;
        const firstYearDiscountAmount = planData.discount;
        const firstYearDiscountPercent = Math.abs((firstYearDiscountAmount / basePrice) * 100);
        const totalBasePrice = numUsers * basePrice;
        const totalFirstYearDiscount = numUsers * firstYearDiscountAmount;
        const taxableAmountFirstYear = totalBasePrice + totalFirstYearDiscount;
        const gstAmountFirstYear = taxableAmountFirstYear * 0.18;
        const totalFirstYearCost = taxableAmountFirstYear + gstAmountFirstYear;

        const taxableAmountRenewal = totalBasePrice;
        const gstAmountRenewal = taxableAmountRenewal * 0.18;
        const totalRenewalCost = taxableAmountRenewal + gstAmountRenewal;

        // Terms and Conditions note
        const termsAndConditions = `
            <p>This proposal is related to the "Odoo Enterprise Subscription Agreement" available on <a href="https://www.odoo.com/r/enterprise-contract">https://www.odoo.com/r/enterprise-contract</a>.
            <p>Note: Minor customizations are done through Odoo Studio, included in the custom plan. But major developments, like Python modules, might require an Odoo.sh cloud subscription. For more information, connect with your Account Manager.</p>
        `;

        const reportContent = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Odoo Pricing Analysis</title>
                <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
                <style>
                    body {
                        font-family: 'Inter', sans-serif;
                        color: #333;
                        line-height: 1.6;
                        margin: 0;
                        padding: 0;
                        background-color: #fff;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                    .report-container {
                        width: 100%;
                        max-width: 210mm;
                        margin: 0 auto;
                        padding: 20mm;
                    }
                    .header {
                        display: flex;
                        justify-content: space-between;
                        align-items: flex-start;
                        padding-bottom: 20px;
                        margin-bottom: 30px;
                        border-bottom: 2px solid #ddd;
                    }
                    .header img {
                        height: 80px;
                        width: auto;
                    }
                    .header-left {
                        text-align: left;
                        line-height: 1.4;
                    }
                    .header-left h1 {
                        font-size: 28px;
                        font-weight: 800;
                        color: #4CAF50;
                        margin: 0 0 5px 0;
                    }
                    .plan-header {
                        margin-bottom: 30px;
                    }
                    .plan-header h2 {
                        font-size: 24px;
                        font-weight: 700;
                        color: #333;
                        margin: 0;
                    }
                    .plan-header p {
                        font-size: 16px;
                        color: #777;
                        margin: 5px 0 0;
                    }
                    .benefits {
                        margin-bottom: 30px;
                    }
                    .benefits-title {
                        font-size: 16px;
                        font-weight: 600;
                        color: #555;
                        margin-bottom: 10px;
                    }
                    .benefits-list {
                        list-style: none;
                        padding: 0;
                        margin: 0;
                        font-size: 14px;
                        color: #555;
                    }
                    .benefits-list li {
                        margin-bottom: 5px;
                    }
                    .benefits-list li::before {
                        content: '‚úì';
                        color: #10b981;
                        font-weight: bold;
                        display: inline-block;
                        width: 1.2em;
                        margin-left: -1.2em;
                    }
                    .pricing-section {
                        margin-bottom: 30px;
                    }
                    .pricing-section h3 {
                        font-size: 18px;
                        font-weight: 700;
                        color: #0A84FF;
                        margin-bottom: 15px;
                        border-bottom: 1px solid #ddd;
                        padding-bottom: 5px;
                    }
                    .pricing-table {
                        width: 100%;
                        font-size: 14px;
                        line-height: 1.8;
                    }
                    .pricing-table .row {
                        display: flex;
                        justify-content: space-between;
                        border-bottom: 1px dashed #ddd;
                        padding: 5px 0;
                    }
                    .pricing-table .row:last-child {
                        border-bottom: none;
                    }
                    .pricing-table .label {
                        text-align: left;
                    }
                    .pricing-table .value {
                        text-align: right;
                        font-weight: 600;
                    }
                    .pricing-table .total-row {
                        font-size: 16px;
                        font-weight: 800;
                        color: #10b981;
                        border-top: 2px solid #10b981;
                        padding-top: 10px;
                        margin-top: 10px;
                    }
                    .footer {
                        font-size: 12px;
                        color: #888;
                        margin-top: 50px;
                        padding-top: 20px;
                        border-top: 1px solid #eee;
                        text-align: center;
                    }
                    .footer p {
                        margin: 0 0 10px 0;
                    }
                    .footer-pan {
                        font-weight: bold;
                        color: #555;
                        margin: 10px 0;
                    }
                </style>
            </head>
            <body>
                <div class="report-container">
                    <header class="header">
                        <div class="header-left">
                            <h1 style="color: #4CAF50;">Odoo IN Pvt Ltd</h1>
                            <p>401 & 402, 4th Floor</p>
                            <p>IT Tower 3, InfoCity</p>
                            <p>Gandhinagar 382007</p>
                            <p>Gujarat, India.</p>
                        </div>
                        <img src="https://www.odoo.com/web/image/res.company/1/logo?unique=7302f3c" alt="Odoo Logo">
                    </header>
                    <div class="plan-header">
                        <h2>${benefitsData.icon} Odoo ${benefitsData.title}</h2>
                        <p>Cost Analysis for ${numUsers} Users</p>
                    </div>
                    <div class="benefits">
                        <div class="benefits-title">Key Benefits:</div>
                        <ul class="benefits-list">
                            ${benefitsData.benefits.map(item => `<li>${item.text}<br><span style="font-size: 0.9em; color: #888;">${item.note}</span></li>`).join('')}
                        </ul>
                    </div>
                    <div class="pricing-section">
                        <h3>First-Year Pricing (on First Order only)</h3>
                        <div class="pricing-table">
                            <div class="row">
                                <span class="label">Base Rate Per User/Year</span>
                                <span class="value">${formatCurrency(basePrice)}</span>
                            </div>
                            <div class="row">
                                <span class="label">Discount (${firstYearDiscountPercent.toFixed(1)}%)</span>
                                <span class="value">${formatCurrency(totalFirstYearDiscount)}</span>
                            </div>
                            <div class="row">
                                <span class="label">Price Before GST</span>
                                <span class="value">${formatCurrency(taxableAmountFirstYear)}</span>
                            </div>
                            <div class="row">
                                <span class="label">GST (18%)</span>
                                <span class="value">${formatCurrency(gstAmountFirstYear)}</span>
                            </div>
                            <div class="row total-row">
                                <span class="label">Total First-Year Cost (Incl. GST)</span>
                                <span class="value">${formatCurrency(totalFirstYearCost)}</span>
                            </div>
                        </div>
                    </div>
                    <div class="pricing-section">
                        <h3>Renewal Pricing</h3>
                        <div class="pricing-table">
                            <div class="row">
                                <span class="label">Base Rate Per User/Year</span>
                                <span class="value">${formatCurrency(basePrice)}</span>
                            </div>
                            <div class="row">
                                <span class="label">Discount (0.0%)</span>
                                <span class="value">${formatCurrency(0)}</span>
                            </div>
                             <div class="row">
                                <span class="label">Price Before GST</span>
                                <span class="value">${formatCurrency(taxableAmountRenewal)}</span>
                            </div>
                            <div class="row">
                                <span class="label">GST (18%)</span>
                                <span class="value">${formatCurrency(gstAmountRenewal)}</span>
                            </div>
                            <div class="row total-row">
                                <span class="label">Total Renewal Cost (Incl. GST)</span>
                                <span class="value">${formatCurrency(totalRenewalCost)}</span>
                            </div>
                        </div>
                    </div>
                    <div class="footer">
                        <p class="footer-pan">PAN No: AACCT6304M || GSTIN: 24AACCT6304M1ZB || Phone: +91 79 40 500 100</p>
                        ${termsAndConditions}
                    </div>
                </div>
            </body>
            </html>
        `;

        const newWindow = window.open('', '_blank');
        newWindow.document.write(reportContent);
        newWindow.document.close();
    }
    
    // NEW FUNCTION: Generate and Print Monthly vs. Yearly Comparison Report (UPDATED)
    function generateAndPrintMonthlyVsYearlyReport(planType) {
        const numUsers = parseInt(numUsersInput.value, 10);
        if (isNaN(numUsers) || numUsers < 1) {
            alert('Please enter a valid number of users to generate the report.');
            return;
        }

        const planData = pricingData[planType];
        const benefitsData = planBenefits[planType];
        
        // --- CALCULATIONS (RATES) ---
        const yearlyBaseRate = planData.yearly.base;
        const yearlyDiscountRate = planData.yearly.discount;
        const monthlyBaseRate = planData.monthly.base;
        const monthlyDiscountRate = planData.monthly.discount;

        const yearlyFirstYearApplicableRate = yearlyBaseRate + yearlyDiscountRate;
        const monthlyFirstYearApplicableRate = monthlyBaseRate + monthlyDiscountRate;

        // --- CALCULATIONS (FIRST YEAR TOTALS) ---
        const yearlyFirstYearTotalBase = yearlyBaseRate * numUsers;
        const yearlyFirstYearTotalDiscount = yearlyDiscountRate * numUsers;
        const yearlyFirstYearPriceExclTax = yearlyFirstYearTotalBase + yearlyFirstYearTotalDiscount;
        const yearlyFirstYearGST = yearlyFirstYearPriceExclTax * 0.18;
        const yearlyFirstYearTotalCost = yearlyFirstYearPriceExclTax + yearlyFirstYearGST;
        const yearlyFirstYearDiscountPercent = Math.abs((yearlyFirstYearTotalDiscount / yearlyFirstYearTotalBase) * 100);

        const monthlyFirstYearTotalBase = monthlyBaseRate * numUsers;
        const monthlyFirstYearTotalDiscount = monthlyDiscountRate * numUsers;
        const monthlyFirstYearPriceExclTax = monthlyFirstYearTotalBase + monthlyFirstYearTotalDiscount;
        const monthlyFirstYearGST = monthlyFirstYearPriceExclTax * 0.18;
        const monthlyFirstYearTotalCost = monthlyFirstYearPriceExclTax + monthlyFirstYearGST;
        const monthlyFirstYearAnnualized = monthlyFirstYearTotalCost * 12;
        const monthlyFirstYearDiscountPercent = Math.abs((monthlyFirstYearTotalDiscount / monthlyFirstYearTotalBase) * 100);
        
        // Loss and % More Expensive based on Yearly Cost (Base)
        const firstYearTotalLoss = monthlyFirstYearAnnualized - yearlyFirstYearTotalCost;
        const firstYearLossPercentage = (firstYearTotalLoss / yearlyFirstYearTotalCost) * 100;

        // --- CALCULATIONS (RENEWAL YEAR TOTALS) ---
        const yearlyRenewalPriceExclTax = yearlyBaseRate * numUsers;
        const yearlyRenewalGST = yearlyRenewalPriceExclTax * 0.18;
        const yearlyRenewalTotalCost = yearlyRenewalPriceExclTax + yearlyRenewalGST;

        const monthlyRenewalPriceExclTax = monthlyBaseRate * numUsers;
        const monthlyRenewalGST = monthlyRenewalPriceExclTax * 0.18;
        const monthlyRenewalTotalCost = monthlyRenewalPriceExclTax + monthlyRenewalGST;
        const monthlyRenewalAnnualized = monthlyRenewalTotalCost * 12;

        // Loss and % More Expensive based on Yearly Cost (Base)
        const renewalTotalLoss = monthlyRenewalAnnualized - yearlyRenewalTotalCost;
        const renewalLossPercentage = (renewalTotalLoss / yearlyRenewalTotalCost) * 100;
        
        // Bar Chart Data 
        const chartData = {
            yearlyFirstYear: yearlyFirstYearTotalCost,
            monthlyFirstYear: monthlyFirstYearAnnualized,
            yearlyRenewal: yearlyRenewalTotalCost,
            monthlyRenewal: monthlyRenewalAnnualized
        };
        const maxCost = Math.max(chartData.monthlyFirstYear, chartData.monthlyRenewal);
        const getBarHeight = (value) => `${(value / maxCost) * 150}px`; 
        
        // Added the detailed Terms and Conditions note here
        const termsAndConditions = `
            <p>This proposal is related to the "Odoo Enterprise Subscription Agreement" available on <a href="https://www.odoo.com/r/enterprise-contract">https://www.odoo.com/r/enterprise-contract</a>.
            <p>Note: Minor customizations are done through Odoo Studio, included in the custom plan. But major developments, like Python modules, might require an Odoo.sh cloud subscription. For more information, connect with your Account Manager.</p>
        `;

        const reportContent = `
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Monthly vs. Yearly Cost Comparison Report</title>
                <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
                <style>
                    /* Combined styles for the printed report for better compatibility */
                    body { font-family: 'Inter', sans-serif; color: #333; line-height: 1.6; margin: 0; padding: 0; }
                    .report-container { width: 210mm; min-height: 297mm; margin: 0 auto; padding: 20mm; background: #fff; box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); }
                    .header { display: flex; justify-content: space-between; align-items: flex-start; padding-bottom: 20px; margin-bottom: 30px; border-bottom: 2px solid #ddd; }
                    .header img { height: 80px; width: auto; }
                    .header-left { text-align: left; line-height: 1.4; }
                    .header-left h1 { font-size: 28px; font-weight: 800; color: #4CAF50; margin: 0 0 5px 0; }
                    .header-left p { font-size: 14px; margin: 0; color: #555; }
                    .plan-header { text-align: center; margin-bottom: 30px; }
                    .plan-header h2 { font-size: 26px; font-weight: 800; color: #0A84FF; margin: 0; }
                    .plan-header p { font-size: 18px; color: #777; margin: 5px 0 0; }
                    .comparison-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
                    .comparison-table th, .comparison-table td { border: 1px solid #eee; padding: 12px; text-align: center; font-size: 14px; }
                    .comparison-table th { background-color: #f0f8ff; color: #0A84FF; font-weight: 700; }
                    .comparison-table .yearly-col { background-color: #e6f7ff; font-weight: 600; color: #10b981; }
                    .comparison-table .monthly-col { background-color: #ffe6e6; font-weight: 600; color: #FF3B30; }
                    .total-row td { font-size: 16px; font-weight: 800; border-top: 2px solid #0A84FF; }
                    .section-title { font-size: 20px; font-weight: 700; color: #0A84FF; margin-bottom: 15px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
                    .saving-highlight { background-color: #fff2f2; border: 1px solid #FF3B30; padding: 15px; margin-bottom: 30px; text-align: center; border-radius: 8px; }
                    .saving-highlight h4 { font-size: 20px; font-weight: 700; color: #FF3B30; margin: 0 0 5px 0; }
                    .chart-area { margin: 30px 0; text-align: center; }
                    .chart-title { font-size: 20px; font-weight: 700; color: #333; margin-bottom: 15px; }
                    .chart-bars { display: flex; justify-content: space-around; align-items: flex-end; height: 200px; border-bottom: 2px solid #333; margin: 0 20px; position: relative; }
                    .bar { width: 18%; margin: 0 5px; background: #0A84FF; border-top-left-radius: 5px; border-top-right-radius: 5px; position: relative; }
                    .bar-label { position: absolute; top: -20px; width: 100%; font-size: 10px; font-weight: 600; color: #333; }
                    .bar-x-label { position: absolute; bottom: -30px; width: 100%; font-size: 10px; font-weight: 600; color: #555; }
                    .bar.yearly { background-color: #10b981; }
                    .bar.monthly { background-color: #FF3B30; }
                    .footer { font-size: 12px; color: #888; margin-top: 50px; padding-top: 20px; border-top: 1px solid #eee; text-align: center; }

                    @media print {
                        .report-container, .report-container * {
                            visibility: visible;
                            font-size: 12pt !important;
                            color: #000 !important;
                            background-color: transparent !important;
                            box-shadow: none !important;
                            -webkit-print-color-adjust: exact;
                            print-color-adjust: exact;
                        }
                    }
                </style>
            </head>
            <body>
                <div class="report-container">
                    <header class="header">
                        <div class="header-left">
                            <h1 style="color: #4CAF50;">Odoo IN Pvt Ltd</h1>
                            <p>401 & 402, 4th Floor</p>
                            <p>IT Tower 3, InfoCity</p>
                            <p>Gandhinagar 382007</p>
                            <p>Gujarat, India.</p>
                        </div>
                        <img src="https://www.odoo.com/web/image/res.company/1/logo?unique=7302f3c" alt="Odoo Logo">
                    </header>
                    <div class="plan-header">
                        <h2>${benefitsData.icon} Monthly vs. Yearly Cost Comparison</h2>
                        <p>Detailed Financial Analysis for Odoo ${benefitsData.title} (${numUsers} Users)</p>
                    </div>

                    <!-- NEW: Pricing Constants Table (Updated as requested) -->
                    <h3 class="section-title">I. Pricing Constants (Per User)</h3>
                    <table class="comparison-table" style="width: 70%; margin: 0 auto 30px auto;">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th class="yearly-col">Yearly Plan</th>
                                <th class="monthly-col">Monthly Plan</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Base Rate (Per Year)</td>
                                <td>${formatCurrency(yearlyBaseRate)}</td>
                                <td>${formatCurrency(monthlyBaseRate * 12)} (Annualized)</td>
                            </tr>
                            <tr>
                                <td>Base Rate (Per Month)</td>
                                <td>${formatCurrency(yearlyBaseRate / 12)}</td>
                                <td>${formatCurrency(monthlyBaseRate)}</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="chart-area">
                        <div class="chart-title">Annual Cost Comparison (Including GST)</div>
                        <div class="chart-bars">
                            <span class="bar-label-y" style="left: -20px; top: 50%;">Cost (‚Çπ)</span>
                            <div class="bar yearly" style="height: ${getBarHeight(chartData.yearlyFirstYear)};">
                                <span class="bar-label">${formatCurrency(chartData.yearlyFirstYear)}</span>
                                <span class="bar-x-label">Year 1 (Yearly)</span>
                            </div>
                            <div class="bar monthly" style="height: ${getBarHeight(chartData.monthlyFirstYear)};">
                                <span class="bar-label">${formatCurrency(chartData.monthlyFirstYear)}</span>
                                <span class="bar-x-label">Year 1 (Monthly)</span>
                            </div>
                            <div class="bar yearly" style="height: ${getBarHeight(chartData.yearlyRenewal)}; background-color: #0e9649;">
                                <span class="bar-label">${formatCurrency(chartData.yearlyRenewal)}</span>
                                <span class="bar-x-label">Renewal (Yearly)</span>
                            </div>
                            <div class="bar monthly" style="height: ${getBarHeight(chartData.monthlyRenewal)}; background-color: #d13028;">
                                <span class="bar-label">${formatCurrency(chartData.monthlyRenewal)}</span>
                                <span class="bar-x-label">Renewal (Monthly)</span>
                            </div>
                        </div>
                    </div>

                    <!-- First Year Comparison -->
                    <h3 class="section-title">II. Year 1: Detailed Breakdown (Including Discounts)</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th class="yearly-col">Yearly Plan</th>
                                <th class="monthly-col">Monthly Plan (Annualized)</th>
                                <th>Difference</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Base Price (${numUsers} Users)</td>
                                <td>${formatCurrency(yearlyFirstYearTotalBase)}</td>
                                <td>${formatCurrency(monthlyFirstYearTotalBase * 12)}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Discount Amount &amp; (%)</td>
                                <td>${formatCurrency(yearlyFirstYearTotalDiscount)} (${yearlyFirstYearDiscountPercent.toFixed(1)}%)</td>
                                <td>${formatCurrency(monthlyFirstYearTotalDiscount * 12)} (${monthlyFirstYearDiscountPercent.toFixed(1)}%)</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Price Before GST</td>
                                <td>${formatCurrency(yearlyFirstYearPriceExclTax)}</td>
                                <td>${formatCurrency(monthlyFirstYearPriceExclTax * 12)}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>GST (18%)</td>
                                <td>${formatCurrency(yearlyFirstYearGST)}</td>
                                <td>${formatCurrency(monthlyFirstYearGST * 12)}</td>
                                <td></td>
                            </tr>
                            <tr class="total-row">
                                <td>TOTAL COST (Incl. GST)</td>
                                <td class="yearly-col">${formatCurrency(yearlyFirstYearTotalCost)}</td>
                                <td class="monthly-col">${formatCurrency(monthlyFirstYearAnnualized)}</td>
                                <td>${formatCurrency(firstYearTotalLoss)}</td>
                            </tr>
                            <tr>
                                <td>Applicable Price Per User (Excl. GST)</td>
                                <td class="yearly-col">${formatCurrency(yearlyFirstYearApplicableRate)} / Year</td>
                                <td class="monthly-col">${formatCurrency(monthlyFirstYearApplicableRate)} / Month</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- First Year Summary -->
                    <div class="saving-highlight loss-highlight">
                        <h4>Monthly Plan is More Expensive!</h4>
                        <p>By choosing the monthly plan, you pay an additional total of 
                            <span style="font-weight: 800;">${formatCurrency(firstYearTotalLoss)}</span>, making the monthly option 
                            <span style="font-weight: 800;">${firstYearLossPercentage.toFixed(1)}%</span> More Expensive Than The Yearly Plan.</p>
                    </div>

                    <!-- Renewal Year Comparison -->
                    <h3 class="section-title">III. Renewal Year: Breakdown (No Discount)</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Metric</th>
                                <th class="yearly-col">Yearly Plan</th>
                                <th class="monthly-col">Monthly Plan (Annualized)</th>
                                <th>Difference</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Base Price (${numUsers} Users)</td>
                                <td>${formatCurrency(yearlyBaseRate * numUsers)}</td>
                                <td>${formatCurrency(monthlyBaseRate * numUsers * 12)}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Discount Amount &amp; (%)</td>
                                <td>${formatCurrency(0)} (0.0%)</td>
                                <td>${formatCurrency(0)} (0.0%)</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Price Before GST</td>
                                <td>${formatCurrency(yearlyRenewalPriceExclTax)}</td>
                                <td>${formatCurrency(monthlyRenewalPriceExclTax * 12)}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>GST (18%)</td>
                                <td>${formatCurrency(yearlyRenewalGST)}</td>
                                <td>${formatCurrency(monthlyRenewalGST * 12)}</td>
                                <td></td>
                            </tr>
                            <tr class="total-row">
                                <td>TOTAL COST (Incl. GST)</td>
                                <td class="yearly-col">${formatCurrency(yearlyRenewalTotalCost)}</td>
                                <td class="monthly-col">${formatCurrency(monthlyRenewalAnnualized)}</td>
                                <td>${formatCurrency(renewalTotalLoss)}</td>
                            </tr>
                            <tr>
                                <td>Applicable Price Per User (Excl. GST)</td>
                                <td class="yearly-col">${formatCurrency(yearlyBaseRate)} / Year</td>
                                <td class="monthly-col">${formatCurrency(monthlyBaseRate)} / Month</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <!-- Renewal Year Summary -->
                    <div class="saving-highlight loss-highlight">
                        <h4>Renewal Cost Comparison</h4>
                        <p>The monthly plan is more expensive by <span style="font-weight: 800;">${formatCurrency(renewalTotalLoss)}</span>, meaning the monthly option is 
                            <span style="font-weight: 800;">${renewalLossPercentage.toFixed(1)}%</span> More Expensive Than The Yearly Plan.</p>
                    </div>
                    
                    <div class="footer">
                        <p class="footer-pan">PAN No: AACCT6304M || GSTIN: 24AACCT6304M1ZB || Phone: +91 79 40 500 100</p>
                        ${termsAndConditions}
                    </div>
                </div>
            </body>
            </html>
        `;

        const newWindow = window.open('', '_blank');
        newWindow.document.write(reportContent);
        newWindow.document.close();
    }
    
    // Event listeners
    document.querySelectorAll('.modal-close').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.modal').forEach(modal => modal.style.display = 'none');
        });
    });
    
    window.addEventListener('click', (event) => {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = 'none';
        }
    });

    numUsersInput.addEventListener('input', () => {
        updateCalculator();
        updateComparisonModal();
    });

    standardPlanBtn.addEventListener('click', () => {
        if (!isStandardPlan) {
            isStandardPlan = true;
            updatePlanButtons();
            updateCalculator();
        }
    });

    customPlanBtn.addEventListener('click', () => {
        if (isStandardPlan) {
            isStandardPlan = false;
            updatePlanButtons();
            updateCalculator();
        }
    });

    function updatePlanButtons() {
        if (isStandardPlan) {
            standardPlanBtn.classList.add('active');
            standardPlanBtn.classList.remove('inactive');
            customPlanBtn.classList.add('inactive');
            customPlanBtn.classList.remove('active');
            planToggleBg.classList.remove('right');
        } else {
            customPlanBtn.classList.add('active');
            customPlanBtn.classList.remove('inactive');
            standardPlanBtn.classList.add('inactive');
            standardPlanBtn.classList.remove('active');
            planToggleBg.classList.add('right');
        }
    }

    yearToggleBtn.addEventListener('click', () => {
        isFirstYear = !isFirstYear;
        yearToggleBtn.textContent = isFirstYear ? 'üîÑ Show Renewal Pricing' : 'üîÑ Show First-Year Pricing';
        
        yearToggleBtn.style.transform = 'scale(0.95)';
        setTimeout(() => {
            yearToggleBtn.style.transform = 'scale(1)';
        }, 150);
        
        updateCalculator();
        if (compareModal.style.display === 'block') {
             updateComparisonModal();
        }
    });
    
    comparePlansBtn.addEventListener('click', () => {
        compareModal.style.display = 'block';
        updateComparisonModal();
    });
    
    // Logic for "Print Cost Analysis"
    printAnalysisBtnModal.addEventListener('click', () => {
        currentReportType = 'analysis';
        printModalTitle.textContent = 'Choose Plan for Standard Analysis Report';
        printStandardBtn.setAttribute('data-report-type', 'analysis');
        printCustomBtn.setAttribute('data-report-type', 'analysis');
        printModal.style.display = 'block';
    });
    
    // Logic for "Print Monthly/Yearly Comparison"
    printMonthlyYearlyComparisonBtn.addEventListener('click', () => {
        currentReportType = 'monthly-yearly';
        printModalTitle.textContent = 'Choose Plan for Monthly vs. Yearly Report';
        printStandardBtn.setAttribute('data-report-type', 'monthly-yearly');
        printCustomBtn.setAttribute('data-report-type', 'monthly-yearly');
        printModal.style.display = 'block';
    });
    
    // Universal Print Handler
    printStandardBtn.addEventListener('click', () => {
        const reportType = printStandardBtn.getAttribute('data-report-type');
        if (reportType === 'analysis') {
            generateAndPrintReport('standard');
        } else if (reportType === 'monthly-yearly') {
            generateAndPrintMonthlyVsYearlyReport('standard');
        }
        printModal.style.display = 'none';
    });

    printCustomBtn.addEventListener('click', () => {
        const reportType = printCustomBtn.getAttribute('data-report-type');
        if (reportType === 'analysis') {
            generateAndPrintReport('custom');
        } else if (reportType === 'monthly-yearly') {
            generateAndPrintMonthlyVsYearlyReport('custom');
        }
        printModal.style.display = 'none';
    });

    // Initialize
    window.addEventListener('load', () => {
        updatePlanButtons();
        setTimeout(updateCalculator, 300);
        updateComparisonModal();
    });
</script>

</body>
</html>
